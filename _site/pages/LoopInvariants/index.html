<!DOCTYPE HTML>
<html lang="en" >
    <head><meta charset="UTF-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"><title>Loop Invariants and Asserts in Code · COMP 221 - Overview &amp; Schedule</title><meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="description" content="Course Website for Macalester MSCS's COMP 221 offered Spring 2026."><meta name="generator" content="Jekyll (using style of GitBook)"><link rel="stylesheet" href="/assets/gitbook/style.css">
<link rel="stylesheet" href="/assets/gitbook/gitbook-plugin-back-to-top-button/plugin.css">
<link rel="stylesheet" href="/assets/gitbook/gitbook-plugin-expandable-chapters-small2/expandable-chapters-small.css">
<link rel="stylesheet" href="/assets/gitbook/gitbook-plugin-fontsettings/website.css">
<link rel="stylesheet" href="/assets/gitbook/gitbook-plugin-search-pro/search.css">
<link rel="stylesheet" href="/assets/gitbook/gitbook-plugin-splitter/splitter.css">
<link rel="stylesheet" href="/assets/css/base.css">
<link rel="stylesheet" href="/assets/css/pseudocode.css">

<link rel="stylesheet" href="/assets/gitbook/custom.css">
<link rel="stylesheet" href="/assets/gitbook/custom-local.css">

<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="/assets/gitbook/images/apple-touch-icon-precomposed-152.png">
<link rel="shortcut icon" href="/" type="image/x-icon">




            <link rel="prev" href="/pages/GraphApplications/" />
        

        
    </head>
    <body>
        <div class="book"><div class="book-summary">
    <script type="text/javascript">
        // Fixes the page links scroll problem on both desktop and mobile browsers
        function pageScrollToTop(element) {
            // both mobile and non-mobile
            $('div.body-inner').animate({scrollTop: 0});
            $(element).parent().find('li>ul>li').removeClass('active');
            return true;  // propagate
        }
        // Fixes the anchor links scroll problem on mobile browsers
        function mobilePageScrollToAnchor(element) {
            $(element).closest('li.chapter').find('ul>li').removeClass('active');
            $(element).parent().addClass('active');
            if ($(document).width() <= 1240) {
                let target = $($(element).attr('href'));
                if (target.length) {
                    $('div.body-inner').animate({
                        scrollTop: target.get(0).offsetTop,
                    });
                }
            }
            return true;
        }
    </script>

    <nav role="navigation">
        <div id="book-search-input" role="search">
            <input type="text" placeholder="Type to search" />
        </div>
        <div id="book-search-input-link" role="search">
            <a href="/assets/search.html">Click to Search</a>
        </div>
        <ul class="summary">
            
            <li class="chapter" data-level="1.1" data-path="">
            
                <a href="/" onclick="pageScrollToTop(this)">
                    COMP 221 - Overview &amp; Schedule
                </a>
                
                    
                
            </li>

            <li class="divider"></li>

            
                
                    <!-- <p>pages</p> -->
                    
                        

                        
                            
                            <li class="chapter" data-level="1.1" data-path="/pages/Activity08/">
                            
                                <a href="/pages/Activity08/" onclick="pageScrollToTop(this)">
                                    Activity: Sorting as Pre-Processing
                                </a>
                                
                                    
                                
                            </li>
                        
                            
                            <li class="chapter" data-level="1.1" data-path="/pages/ActivityBS/">
                            
                                <a href="/pages/ActivityBS/" onclick="pageScrollToTop(this)">
                                    Activity: Binary Search Variants
                                </a>
                                
                                    
                                
                            </li>
                        
                            
                            <li class="chapter" data-level="1.1" data-path="/pages/ActivityDP1/">
                            
                                <a href="/pages/ActivityDP1/" onclick="pageScrollToTop(this)">
                                    Activity: Dynamic Programming Practice
                                </a>
                                
                                    
                                
                            </li>
                        
                            
                            <li class="chapter" data-level="1.1" data-path="/pages/ActivityDP2/">
                            
                                <a href="/pages/ActivityDP2/" onclick="pageScrollToTop(this)">
                                    Activity: Dynamic Programming Practice 2
                                </a>
                                
                                    
                                
                            </li>
                        
                            
                            <li class="chapter" data-level="1.1" data-path="/pages/ActivityDS/">
                            
                                <a href="/pages/ActivityDS/" onclick="pageScrollToTop(this)">
                                    Activity: Data Structure Review
                                </a>
                                
                                    
                                
                            </li>
                        
                            
                            <li class="chapter" data-level="1.1" data-path="/pages/ActivityHS/">
                            
                                <a href="/pages/ActivityHS/" onclick="pageScrollToTop(this)">
                                    Activity: Heap- &amp; TreeSort
                                </a>
                                
                                    
                                
                            </li>
                        
                            
                            <li class="chapter" data-level="1.1" data-path="/pages/ActivityLoopInv/">
                            
                                <a href="/pages/ActivityLoopInv/" onclick="pageScrollToTop(this)">
                                    Activity: Sorting and Loop Invariants
                                </a>
                                
                                    
                                
                            </li>
                        
                            
                            <li class="chapter" data-level="1.1" data-path="/pages/ActivityMT/">
                            
                                <a href="/pages/ActivityMT/" onclick="pageScrollToTop(this)">
                                    Activity: The Master Theorem
                                </a>
                                
                                    
                                
                            </li>
                        
                            
                            <li class="chapter" data-level="1.1" data-path="/pages/ActivityQS/">
                            
                                <a href="/pages/ActivityQS/" onclick="pageScrollToTop(this)">
                                    Activity: Quicksort and Partitioning
                                </a>
                                
                                    
                                
                            </li>
                        
                            
                            <li class="chapter" data-level="1.1" data-path="/pages/ActivitySort/">
                            
                                <a href="/pages/ActivitySort/" onclick="pageScrollToTop(this)">
                                    Activity: Big-O Practice &amp; Sorting 1
                                </a>
                                
                                    
                                
                            </li>
                        
                            
                            <li class="chapter" data-level="1.1" data-path="/pages/GraphApplications/">
                            
                                <a href="/pages/GraphApplications/" onclick="pageScrollToTop(this)">
                                    Graph Applications
                                </a>
                                
                                    
                                
                            </li>
                        
                            
                            <li class="chapter active" data-level="1.2" data-path="/pages/LoopInvariants/">
                            
                                <a href="/pages/LoopInvariants/" onclick="pageScrollToTop(this)">
                                    Loop Invariants and Asserts in Code
                                </a>
                                
                                    
                                        <ul><li><a href="#li-1-construct-a-statement-pn-that-is-true-after-the-iteration-where-in" onclick="mobilePageScrollToAnchor(this)" >LI 1: Construct a statement $P(n)$ that is true after the iteration where $i=n$</a></li><li><a href="#li-2-construct-a-statement-pn-that-is-true-after-the-iteration-where-jn-for-a-fixed-i" onclick="mobilePageScrollToAnchor(this)" >LI 2: Construct a statement $P(n)$ that is true after the iteration where $j=n$ (for a fixed $i$)</a></li></ul>

                                    
                                
                            </li>
                        

                        
                            <li class="divider"></li>
                        
                    
                
                    <!-- <p>posts</p> -->
                    
                        

                        

                        
                    
                
            
        </ul>
    </nav>
</div>
<div class="book-body">
                <div class="book-header" role="navigation">
                    <!-- Title -->
                    <h1>
                        <i class="fa fa-circle-o-notch fa-spin"></i>
                        
                            <a href="." >Loop Invariants and Asserts in Code</a>
                        
                    </h1>
                </div>

                <div class="body-inner"><div class="page-wrapper" tabindex="-1" role="main">
    

    <div class="page-inner">
        <div id="book-search-results">
            <div class="search-noresults">
                <section class="normal markdown-section">
                    
                        <h1 id="/pages/LoopInvariants">Loop Invariants and Asserts in Code</h1>
                    

                    <p>When learning about loop invariants, it may be helpful to see how they correspond to their equivalent <code class="language-plaintext highlighter-rouge">assert</code>-ions in code. That’s what this document aims to do, in Python (the closest thing to pseudocode one can get!).</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span> <span class="c1"># This gives us real arrays in Python
</span></code></pre></div></div>

<p>First, let’s implement insertion sort as close to our pseudocode as possible:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">insertionSort</span><span class="p">(</span><span class="n">arr</span> <span class="p">:</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)):</span>
        <span class="n">j</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">i</span>
        <span class="nf">while </span><span class="p">(</span><span class="n">j</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span> 
            <span class="c1"># Swap!
</span>            <span class="n">temp</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
            <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
            <span class="n">j</span> <span class="o">-=</span> <span class="mi">1</span>
</code></pre></div></div>

<p>Now let’s spot check that the algorithm works on some input:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Before:</span><span class="se">\t\t</span><span class="sh">"</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>
<span class="nf">insertionSort</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">After:</span><span class="se">\t\t</span><span class="sh">"</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Before:		 [5 4 3 2 1]
After:		 [1 2 3 4 5]
</code></pre></div></div>

<p>Good!</p>

<p>Now, our goal is to determine the reality of our loop invariant, so we must inspect the behavior of the algorithm on every loop iteration. We ask ourselves: <em>How does this algorithm make progress in each iteration of the loop?</em> Additionally, <em>How can I formally declare that progress is being made?</em></p>

<p>Let’s add a print statement to track the state of the array after each iteration of the outer for-loop to take a look:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">insertionSort</span><span class="p">(</span><span class="n">arr</span> <span class="p">:</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)):</span>
        <span class="n">j</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">i</span>
        <span class="nf">while </span><span class="p">(</span><span class="n">j</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span> 
            <span class="c1"># Swap!
</span>            <span class="n">temp</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
            <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
            <span class="n">j</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">At i = {},</span><span class="se">\t</span><span class="s"> {}</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">arr</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="c1"># Worst-case input!
</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Before:</span><span class="se">\t\t</span><span class="sh">"</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>
<span class="nf">insertionSort</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">After:</span><span class="se">\t\t</span><span class="sh">"</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Before:		 [5 4 3 2 1]
At i = 1,	 [4 5 3 2 1]
At i = 2,	 [3 4 5 2 1]
At i = 3,	 [2 3 4 5 1]
At i = 4,	 [1 2 3 4 5]
After:		 [1 2 3 4 5]
</code></pre></div></div>

<p>Now, inspect the output and…</p>

<h3 id="li-1-construct-a-statement-pn-that-is-true-after-the-iteration-where-in">LI 1: Construct a statement $P(n)$ that is true after the iteration where $i=n$</h3>

<p>That is an <em>invariant</em> that is true after every <em>loop</em> iteration: A <strong>Loop Invariant!</strong>. Here, we note that we’re building a <em>sorted subarray from the left edge that grows with each step: *After iteration $i$, <code class="language-plaintext highlighter-rouge">arr[i]</code> is sorted</em>.</p>

<p>Now to show that this loop invariant is true, we have to understand that insertion operation happening in each iteration. It’s helpful to decompose our insertion sort into two pieces: The part the performs the insert and the loop that repeatedly inserts. Let’s rewrite with this decomposition and more print statements:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="n">arr</span> <span class="p">:</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">,</span> <span class="n">i</span> <span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s"> inserts arr[i] into it</span><span class="sh">'</span><span class="s">s sorted position in arr[:i+1]

    Precondition: arr[:i] is sorted
    Postcondition: arr[:i+1] is sorted </span><span class="sh">"""</span>

    <span class="n">j</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">i</span> <span class="c1"># preserve the value of i 
</span>    
    <span class="nf">while </span><span class="p">(</span><span class="n">j</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span> 
        <span class="c1"># Swap!
</span>        <span class="n">temp</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
        <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
        <span class="n">j</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\t</span><span class="s"> After j = {}, </span><span class="se">\t</span><span class="s"> arr[:i+1] = </span><span class="se">\t</span><span class="s">{}</span><span class="sh">"</span>
              <span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">arr</span><span class="p">[:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]))</span>

<span class="k">def</span> <span class="nf">insertionSort</span><span class="p">(</span><span class="n">arr</span> <span class="p">:</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">i = {}</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="nf">insert</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="se">\n</span><span class="s">After i = {},</span><span class="se">\t\t</span><span class="s"> arr = </span><span class="se">\t\t</span><span class="s">{}</span><span class="sh">"</span>
              <span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">arr</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="c1"># Worst-case input!
</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Before:</span><span class="se">\t\t\t\t\t</span><span class="s">{}</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">A</span><span class="p">))</span>
<span class="nf">insertionSort</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">After:</span><span class="se">\t\t\t\t\t</span><span class="s">{}</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">A</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Before:					[5 4 3 2 1]

i = 1
	 After j = 0, 	 arr[:i+1] = 	[4 5]

After i = 1,		 arr = 		[4 5 3 2 1]

i = 2
	 After j = 1, 	 arr[:i+1] = 	[4 3 5]
	 After j = 0, 	 arr[:i+1] = 	[3 4 5]

After i = 2,		 arr = 		[3 4 5 2 1]

i = 3
	 After j = 2, 	 arr[:i+1] = 	[3 4 2 5]
	 After j = 1, 	 arr[:i+1] = 	[3 2 4 5]
	 After j = 0, 	 arr[:i+1] = 	[2 3 4 5]

After i = 3,		 arr = 		[2 3 4 5 1]

i = 4
	 After j = 3, 	 arr[:i+1] = 	[2 3 4 1 5]
	 After j = 2, 	 arr[:i+1] = 	[2 3 1 4 5]
	 After j = 1, 	 arr[:i+1] = 	[2 1 3 4 5]
	 After j = 0, 	 arr[:i+1] = 	[1 2 3 4 5]

After i = 4,		 arr = 		[1 2 3 4 5]
After:					[1 2 3 4 5]
</code></pre></div></div>

<h3 id="li-2-construct-a-statement-pn-that-is-true-after-the-iteration-where-jn-for-a-fixed-i">LI 2: Construct a statement $P(n)$ that is true after the iteration where $j=n$ (for a fixed $i$)</h3>

<p>Create <em>another</em> loop invariant for a call to <code class="language-plaintext highlighter-rouge">insert</code>!</p>

<p>After the iterations where $j=n$, we have that <code class="language-plaintext highlighter-rouge">arr[j:i+1]</code> is sorted! But this isn’t all (as we’ve seen in the proof of correctness): we know that <code class="language-plaintext highlighter-rouge">arr[1:j]</code> is also sorted (it began sorted and hasn’t been touched!), and we know that all elements in <code class="language-plaintext highlighter-rouge">arr[1:j]</code> are less than elements in <code class="language-plaintext highlighter-rouge">arr[j+1:i+1]</code> (these are the elements of the initially sorted subarray we moved to the right of the element we’re inserting!).</p>

<p>All we’ve done is inspect a couple of outputs of the algorithm to make a claim about the code (namely, we claim that our two loop invariants hold!). This is identical to the process to arrive at the claims we make about the pseudocode, except instead of working through examples by hand, we’re running through real code!</p>

<p>One fun thing that we can do in code is <em>enforce</em> our loop invariants through programming constructs like <code class="language-plaintext highlighter-rouge">assert</code>, which will throw an error if it’s argument evaluates to <code class="language-plaintext highlighter-rouge">false</code>. Here is one way of encoding our loop invariant into code:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">isSorted</span><span class="p">(</span><span class="n">arr</span> <span class="p">:</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">,</span> <span class="n">i</span> <span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">j</span> <span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s"> Returns True if arr[i:j+1] (i.e., A[i...j]) is sorted.
    </span><span class="sh">"""</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">arr</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">arr</span><span class="p">[</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">]:</span> <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>

<span class="k">def</span> <span class="nf">arrSmaller</span><span class="p">(</span><span class="n">arr1</span> <span class="p">:</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">,</span> <span class="n">arr2</span> <span class="p">:</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">arr1</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">arr2</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">f</span> <span class="o">&lt;</span> <span class="n">e</span><span class="p">:</span> <span class="k">return</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="bp">True</span>

<span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="n">arr</span> <span class="p">:</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">,</span> <span class="n">i</span> <span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s"> inserts arr[i] into it</span><span class="sh">'</span><span class="s">s sorted position in arr[:i+1]

    Precondition: arr[:i] is sorted
    Postcondition: arr[:i+1] is sorted 
    </span><span class="sh">"""</span>

    <span class="n">j</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">i</span> <span class="c1"># preserve the value of i 
</span>    
    <span class="nf">while </span><span class="p">(</span><span class="n">j</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span> 
        <span class="c1"># Swap!
</span>        <span class="n">temp</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
        <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
        <span class="n">j</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="nf">assert </span><span class="p">(</span><span class="nf">isSorted</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> 
                <span class="nf">isSorted</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="ow">and</span>
                <span class="nf">arrSmaller</span><span class="p">(</span><span class="n">arr</span><span class="p">[:</span><span class="n">j</span><span class="p">],</span><span class="n">arr</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])),</span> <span class="sh">"</span><span class="s">Insert LI False</span><span class="sh">"</span> 

<span class="k">def</span> <span class="nf">insertionSort</span><span class="p">(</span><span class="n">arr</span> <span class="p">:</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">arr</span><span class="p">)):</span>
        <span class="nf">insert</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">assert</span> <span class="nf">isSorted</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="sh">"</span><span class="s">insertionSort LI False</span><span class="sh">"</span> 
</code></pre></div></div>

<p>And now we can show that these invariants are true for our sample (worst-case) input of length 5.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="c1"># Worst-case input!
</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Before:</span><span class="se">\t\t</span><span class="sh">"</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>
<span class="nf">insertionSort</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">After:</span><span class="se">\t\t</span><span class="sh">"</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Before:		 [5 4 3 2 1]
After:		 [1 2 3 4 5]
</code></pre></div></div>

<p>However, we can’t show that our loop invariant holds true for all inputs (for the same reason that testing can’t show that our algorithm is <em>correct</em> on all inputs through testing). We can, however, convince ourselves that it holds true for a random sample of inputs: Here we have our 2 LI asserts + a correctness assert going for 10 random arrays for each array size from 2 to 100: We get no assert failures!</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">50</span><span class="p">):</span>
        <span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="nf">rand</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="nf">insertionSort</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
        <span class="nf">assert </span><span class="p">(</span><span class="nf">isSorted</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nf">len</span><span class="p">(</span><span class="n">A</span><span class="p">))),</span> <span class="sh">"</span><span class="s">Sorting Failed</span><span class="sh">"</span>
</code></pre></div></div>

<p>But we should convince ourselves that <code class="language-plaintext highlighter-rouge">assert</code> does actually do something!</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="k">assert</span> <span class="nf">isSorted</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="sh">"</span><span class="s">This error message should appear</span><span class="sh">"</span>
</code></pre></div></div>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">---------------------------------------------------------------------------

AssertionError                            Traceback (most recent call last)

Cell In[48], line 2
      1 A = np.array([5,4,3,2,1])
</span><span class="gp">----&gt;</span><span class="w"> </span>2 assert isSorted<span class="o">(</span>A,0, 4<span class="o">)</span>, <span class="s2">"This error message should appear"</span>
<span class="go">

AssertionError: This error message should appear
</span></code></pre></div></div>

<p>And it does! The error message appears!</p>
</section>
            </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div></div>
    </div>
</div>

<!-- introduce mathjax support -->
<script>
window.MathJax = {
  tex: {
    inlineMath: [ ['$', '$'], ['\\(', '\\)'] ]
  },
  svg: {
    fontCache: 'global'
  }
};
</script>
<script
  type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>


<!-- introduce per-page mermaid support -->


<!-- introduce mathjax support -->
<script>
    function fixes_chrome_anchors() {
        let chrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
        if (window.location.hash && chrome) {
            setTimeout(function () {
                var hash = window.location.hash;
                window.location.hash = "";
                window.location.hash = hash;
            }, 300);
        }
    }

    if (document.readyState === "loading") {
        // Loading hasn't finished yet
        document.addEventListener("DOMContentLoaded", fixes_chrome_anchors);
    } else {
        // `DOMContentLoaded` has already fired
        fixes_chrome_anchors();
    }
</script>


                        <a href="/pages/GraphApplications/" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Graph Applications">
                            <i class="fa fa-angle-left"></i>
                        </a>
                    

                    
                </div>
            </div>

            <script>
            var gitbook = gitbook || [];
            gitbook.push(function() {
                gitbook.page.hasChanged({
    "page": {
        "title": "Introduction",
        "level": "1.1",
        "depth": 1,
        
        "dir": "ltr"
    },    "config": {
        "plugins": ["fontsettings", "highlight", "livereload", "lunr", "search", "sharing", "theme-default", "livereload"],
        "styles": {
            "ebook": "styles/ebook.css",
            "epub": "styles/epub.css",
            "mobi": "styles/mobi.css",
            "pdf": "styles/pdf.css",
            "print": "styles/print.css",
            "website": "styles/website.css"
        },
        "pluginsConfig": {
            "expandable-chapter-small2": {
                "articlesExpand": true,
            },
            "fontsettings": {
                "family": "sans",
                "size": 2,
                "theme": "white"
            },
            "highlight": {},
            "livereload": {},
            "lunr": {
                "ignoreSpecialCharacters": false,
                "maxIndexSize": 1000000
            },
            "search": {},            "sharing": {
                "facebook": false,

                "google": false,

                "github": true,
              
                "github_link": "https://github.com/mac-comp221-sp26",
              

                "telegram": false,
                "telegram_link": "https://t.me",

                "instapaper": false,

                "twitter": false,
              

                "vk": false,

                "weibo": false,

                "all": ["facebook", "google", "twitter", "weibo", "instapaper", "github", "telegram"]
            },
"theme-default": {
                "showLevel": false,
                "styles": {
                    "ebook": "styles/ebook.css",
                    "epub": "styles/epub.css",
                    "mobi": "styles/mobi.css",
                    "pdf": "styles/pdf.css",
                    "print": "styles/print.css",
                    "website": "styles/website.css"
                }
            },
        },
        "theme": "default",
        "author": "Tao He",
        "pdf": {
            "pageNumbers": true,
            "fontSize": 12,
            "fontFamily": "Arial",
            "paperSize": "a4",
            "chapterMark": "pagebreak",
            "pageBreaksBefore": "/",
            "margin": {
                "right": 62,
                "left": 62,
                "top": 56,
                "bottom": 56
            }
        },
        "structure": {
            "langs": "LANGS.md",
            "readme": "README.md",
        },
        "variables": {},
        "title": "COMP 221 - Overview & Schedule",
        "language": "en",
        "gitbook": "*"
    },
    "file": {
        "path": "_pages/LoopInvariants.md",
        "mtime": "2026-02-16 14:19:09 -0600",
        "type": "markdown"
    },
    "gitbook": {
        "version": "",
        "time": "2026-02-16 14:19:09 -0600"
    },
    "basePath": "",
    "book": {
        "language": ""
    }
});
            });
            </script>
        </div><script src="/assets/gitbook/gitbook.js"></script>
<script src="/assets/gitbook/theme.js"></script>

<script src="/assets/gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
<script src="/assets/gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
<script src="/assets/gitbook/gitbook-plugin-expandable-chapters-small2/expandable-chapters-small.js"></script>
<script src="/assets/gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
<script src="/assets/gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
<script src="/assets/gitbook/gitbook-plugin-search-pro/search.js"></script>
<script src="/assets/gitbook/gitbook-plugin-sharing/buttons.js"></script>
<script src="/assets/gitbook/gitbook-plugin-splitter/splitter.js"></script>

<!--
<script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
<script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
<script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
<script src="../gitbook/gitbook-plugin-search/search.js"></script>
-->

<script src="/assets/gitbook/custom.js"></script>
<script src="/assets/gitbook/custom-local.js"></script>

</body>
</html>